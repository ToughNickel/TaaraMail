{% extends "layout.html" %}
{% block content %}

<h1>General Report Customisation</h1>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

     <!--include libraries(jQuery, bootstrap)-->
    <!--<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
    <!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" />-->
    <!--<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>-->

    <!-- include summernote css/js-->
    {% load staticfiles %}
    <link href="{% static 'css/summernote-lite.css' %}" rel="stylesheet">
    <script src="{% static 'js/summernote-lite.js' %}"></script>

<script>
  var i = 1;
  setCookie('parameter_count', i, 1);

  function addParameterGroup(){
    var node = document.getElementById('para-grp-1');
    var clone = node.cloneNode(true);
    i++;
    clone.id = 'para-grp-' + i;
    node.parentNode.appendChild(clone);


    var cloneChild = document.getElementById('para-grp-' + i).childNodes;
    cloneChild[3].childNodes[3].id = "gen-para-" + i;cloneChild[3].childNodes[3].name = "gen-para-" + i;
    cloneChild[5].childNodes[3].id = "gen-para-" + i + "-value";cloneChild[5].childNodes[3].name = "gen-para-" + i + "-value";
    cloneChild[7].childNodes[1].id = "gen-para-" + i + "-blank-check";cloneChild[7].childNodes[1].name = "gen-para-" + i + "-blank-check";
    cloneChild[9].childNodes[1].id = "gen-para-" + i + "-not-blank-check";cloneChild[9].childNodes[1].name = "gen-para-" + i + "-not-blank-check";


    setCookie('parameter_count', i, 1);
  }

  function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + (exdays*24*60*60*1000));
      var expires = "expires="+ d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }
</script>

<script>
    $(document).ready(function() {
      $('#email-part-body').summernote();
    });

</script>

{{ form.media }}

<form action="{% url 'mail_sender:customise' %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div id="para-list">
    <div id="para-grp-1">
        <div class="form-group"><br><br></div>
      <div class="form-group">
        <label for="gen-para-1">Parameter select</label>
        <select class="form-control form-control-lg" id="gen-para-1" name="gen-para-1">

            {% for parameter in parameters %}
                <option>{{ parameter }}</option>
            {% endfor %}
        </select>
      </div>
        <div class="form-group">
            <label for="gen-para-1-value">Value Desired</label>
            <input id="gen-para-1-value" class="form-control form-control-lg" type="text" placeholder="Value" name="gen-para-1-value">
        </div>

        <div class="form-check checkbox">
            <input type="checkbox" class="form-check-input" id="gen-para-1-blank-check" name="gen-para-1-blank-check">
            <span><label class="form-check-label" for="gen-para-1-blank-check">Blank</label></span>
        </div>
        <div class="form-check checkbox">
            <input type="checkbox" class="form-check-input" id="gen-para-1-not-blank-check" name="gen-para-1-not-blank-check">
            <span><label class="form-check-label" for="gen-para-1-not-blank-check">Not Blank</label></span>
        </div>
</div>
    </div>

    <div class="form-group"><br><br></div>
    <div class="form-group">
        <input type="button" id="add-para" class="btn btn-primary form-control form-control-lg" value="+" onclick="addParameterGroup();"/>
    </div>
        <div class="form-group"><br><br></div>

    <div id="email-part">
        <div class="form-group">
            <input type="text" id="email-part-subject" class="form-control form-control-lg" placeholder="Subject" name="email-part-subject"/>
        </div>

        {{ form }}
    </div>

    <br><br>

    <div class="form-group">
        <button type="submit" class="btn btn-primary form-control form-control-lg" id="Submit">Send Email</button>
    </div>
</form>

{% endblock %}